<!-- ---
layout: default
title: Hank Quinlan, Horrible Cop
---
<div class="blurb">
	<h1>Hi there, I'm Hank Quinlan!</h1>
	<p>I'm best known as the horrible cop from <em>A Touch of Evil</em> Don't trust me. <a href="/about">Read more about my life...</a></p>
</div><!-- /.blurb -->
 --><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Babylon Template</title>

    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>

    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
</head>

<body>

<canvas id="renderCanvas" touch-action="none"></canvas> <!-- touch-action="none" for best results from PEP -->

<script>
    const canvas = document.getElementById("renderCanvas"); // Get the canvas element
    const engine = new BABYLON.Engine(canvas, true); // Generate the BABYLON 3D engine

    // Add your code here matching the playground format
    const createScene = async function () {

        // This creates a basic Babylon Scene object (non-mesh)
        const scene = new BABYLON.Scene(engine);

        // This creates and positions a free camera (non-mesh)
        const camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(0, 5, -10), scene);

        // This targets the camera to scene origin
        camera.setTarget(BABYLON.Vector3.Zero());

        // This attaches the camera to the canvas
        camera.attachControl(canvas, true);

        // This creates a light, aiming 0,1,0 - to the sky (non-mesh)
        const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);

        // Default intensity is 1. Let's dim the light a small amount
        light.intensity = 0.7;

        // Our built-in 'sphere' shape.
        const sphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 2, segments: 32}, scene);
        sphere.position.y = 1;

        var gridMaterial = new BABYLON.GridMaterial("grid", scene);
        // Add some pillars
        [{x: 10, z: 10}, {x: 10, z: -10}, {x: -10, z: -10}, {x: -10, z: 10}].forEach(coord => {

            const box = BABYLON.MeshBuilder.CreateBox('box', {
                height: 10,
                width: 2,
                depth: 2
            }, scene);

            box.position.x = coord.x;
            box.position.z = coord.z;
            box.position.y = 5;

            box.material = gridMaterial;
        });


        const env = scene.createDefaultEnvironment();

        // here we add XR support
        const xrHelper = await scene.createDefaultXRExperienceAsync({
            floorMeshes: [env.ground],
            // uiOptions: {
            //     sessionMode: "immersive-ar",
            // },
        });

        if (!xrHelper.baseExperience) {
            // no xr support
            console.log("fail sauce");
        }

        const ground = BABYLON.Mesh.CreateGround("floor", {width: 10, height: 10, subdivisions: 2}, scene);
        // vrHelper.enableTeleportation({ floorMeshName: "ground" });

        // xrHelper.teleportation = featuresManager.enableFeature(WebXRFeatureName.TELEPORTATION, "stable" /* or latest */, {
        //     xrInput: xrHelper.input,
        //     floorMeshes: [ground],
        //     renderingGroupId: 1,
        // });


        //  // Left and right hand position/rotation
        // if (vrHelper.webVRCamera.leftController) {
        //   leftHand.position = vrHelper.webVRCamera.leftController.devicePosition.clone();
        //   leftHand.rotationQuaternion = vrHelper.webVRCamera.leftController.deviceRotationQuaternion.clone();
        // }
        // if (vrHelper.webVRCamera.rightController) {
        //   rightHand.position = vrHelper.webVRCamera.rightController.devicePosition.clone();
        //   rightHand.rotationQuaternion = vrHelper.webVRCamera.rightController.deviceRotationQuaternion.clone();
        // }

        // // Head position/rotation
        // head.position = vrHelper.webVRCamera.devicePosition.clone();
        // head.rotationQuaternion = vrHelper.webVRCamera.deviceRotationQuaternion.clone();


        return scene;

    };


    const scene = createScene(); //Call the createScene function

    // Register a render loop to repeatedly render the scene
    scene.then((sc) => {
        engine.runRenderLoop(function () {
            sc.render();
        });

        // Watch for browser/canvas resize events
        window.addEventListener("resize", function () {
            engine.resize();
        });
    });
</script>

</body>

</html>
